<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Procesamiento y visualización de datos en R</title>
    <meta charset="utf-8" />
    <meta name="author" content="José Luis Texcalac Sangrador" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/rutgers.css" rel="stylesheet" />
    <link href="libs/remark-css/rutgers-fonts.css" rel="stylesheet" />
    <link rel="stylesheet" href="rutgers_modif.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Procesamiento y visualización de datos en R
## Sesión 05 - Tidyverse
### José Luis Texcalac Sangrador
### Septiembre 2021

---




name: css

&amp;nbsp;

# Editar/generar archivo .CSS

.pull-left[

```r
h1{
  color: red;
}

h2{
  color: black;
}

body{
  font-family: 'Avenir';
  color: blue;
  font-size;
  line-height: 2em;
}
```

]

.pull-right[

&lt;img src="https://camo.envatousercontent.com/db86611e412313b2469688fde8651c5df93d3f47/687474703a2f2f617072656e646167616d65732e636f6d2f73746f636b2f70726f6d6f2f6a61636b68616d6d65722f636f6c6f727347696630322e676966" width="100%" /&gt;

]

---

name: tidydata

# tidydata

&amp;nbsp;

&lt;img src="./img/tidydata.png" width="80%" style="display: block; margin: auto;" /&gt;

---

name: messydata

# messydata

&lt;img src="./img/messydata.png" width="60%" style="display: block; margin: auto;" /&gt;

---

name: wide_long

# Datos wide y long

&amp;nbsp;

&lt;img src="./img/wide_long.png" width="80%" style="display: block; margin: auto;" /&gt;

---

name: core_tidyverse

# Core Tidyverse

.pull-left[


```r
install.packages("tidyverse")
```

es equivalente a


```r
install.packages("ggplot2")

install.packages("tibble")

install.packages("tidyr")

install.packages("readr")

install.packages("purrr")

install.packages("dplyr")

install.packages("stringr")

install.packages("forcats")
```

]

.pull-right[

```r
library("tidyverse")
```

es equivalente a


```r
library("ggplot2")

library("tibble")

library("tidyr")

library("readr")

library("purrr")

library("dplyr")

library("stringr")

library("forcats")
```
]

---
# Cargar el paquete Tidyverse a la sesión


```r
library(tidyverse)
```

```
## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──
```

```
## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
## ✓ tibble  3.1.5     ✓ dplyr   1.0.7
## ✓ tidyr   1.1.4     ✓ stringr 1.4.0
## ✓ readr   2.0.1     ✓ forcats 0.5.1
```

```
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()
```

---

name: pipe

.left-column[
&lt;img src="./img/pipe.png" width="50%" style="display: block; margin: auto auto auto 0;" /&gt;

]

.right-column[

# Pipe

&amp;nbsp;

&lt;img src="./img/pipe_base.png" width="100%" style="display: block; margin: auto auto auto 0;" /&gt;

]

---

name: importar

# Importar datos a R

&lt;img src="./img/importar.png" width="70%" style="display: block; margin: auto;" /&gt;

---

name: turno_1

# Su turno...

.pull-left[

### Instale los siguientes paquetes

- Desde el **CRAN**:
  
  - tidyverse, lubridate, readxl, haven, janitor
  
- Desde **Github**:

  - `kableExtra`: "haozhu233/kableExtra"
  
  - `pander`: "Rapporter/pander"
  
  - `summarytools`: "dcomtois/summarytools"
  
  - `visdat`: "ropensci/visdat"
]

.pull-right[

&amp;nbsp;

&amp;nbsp;


```r
install.packages("tidyverse")
```

&amp;nbsp;


```r
remotes::install_github("Rapporter/pander")
```

]

---

name: turno_2

# Su turno...

&amp;nbsp;

&lt;img src="./img/files_classroom.png" width="90%" style="display: block; margin: auto;" /&gt;

---

name: gestion_files

# Gestión de directorios en un proyecto

&amp;nbsp;

&lt;img src="./img/gestion_files.png" width="90%" style="display: block; margin: auto;" /&gt;

---

name: importar_dbf

# Importar archivos - .DBF

-  El paquete .RUred[foreign] permite importar archivos con extensión .RUred[.dbf]

- El comando .RUred[read.dbf( )] nos permite leer archivos con extensión .RUred[.dbf]


```r
library(foreign)
tabla_dbf &lt;- read.dbf("./data/DBF_archivo.dbf")
```

--

- Se guarda el objeto pero no se imprime en pantalla

- Se requiere llamar a la malla o a una parte de ella con el comando **head(*x*, *n*)**

--

&lt;style type="text/css"&gt;
pre {
  max-width: 100%;
  max-height: 60%;
  overflow-x: scroll;
  overflow-y: scroll !important;
}
&lt;/style&gt;


```r
head(tabla_dbf)
```


```
##   MONTH ESTACION   ZONA      Y2007      Y2008      Y2009      Y2010      Y2011      Y2012      Y2013      Y2014      Y2015
## 1   m07      ACO   ZMVM 0.01884852 0.02532318 0.02966288 0.02261605 0.02474085 0.02520094 0.02980886 0.02510226 0.02969152
## 2   m07      ACO   ZMVM 0.01884852 0.02532318 0.02966288 0.02261605 0.02474085 0.02520094 0.02980886 0.02510226 0.02969152
## 3   m07      AGU ZM_Gdl 0.03924623 0.02776190 0.02936694 0.02775538 0.02652604 0.02786606 0.02555833 0.02449194 0.02641579
## 4   m07      AJM   ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.04322095
## 5   m07      AJU   ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.03880226
## 6   m07      AJU   ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.03880226
```

---

name: malla_propiedades

# Revisemos el objeto   *`tabla-dbf`*

- Veamos el tipo de objeto


```r
class(tabla_dbf)
```

```
## [1] "data.frame"
```

--

- Reviso los nombres de columnas


```r
names(tabla_dbf)
```

```
##  [1] "MONTH"    "ESTACION" "ZONA"     "Y2007"    "Y2008"    "Y2009"   
##  [7] "Y2010"    "Y2011"    "Y2012"    "Y2013"    "Y2014"    "Y2015"
```

--


```r
dim(tabla_dbf)
```

```
## [1] 68 12
```

---

name: head_dataframe

# Imprimo mi objeto *(data frame)* en pantalla


```r
tabla_dbf
```


```
##    MONTH ESTACION      ZONA      Y2007      Y2008      Y2009      Y2010      Y2011      Y2012      Y2013      Y2014      Y2015
## 1    m07      ACO      ZMVM 0.01884852 0.02532318 0.02966288 0.02261605 0.02474085 0.02520094 0.02980886 0.02510226 0.02969152
## 2    m07      ACO      ZMVM 0.01884852 0.02532318 0.02966288 0.02261605 0.02474085 0.02520094 0.02980886 0.02510226 0.02969152
## 3    m07      AGU    ZM_Gdl 0.03924623 0.02776190 0.02936694 0.02775538 0.02652604 0.02786606 0.02555833 0.02449194 0.02641579
## 4    m07      AJM      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.04322095
## 5    m07      AJU      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.03880226
## 6    m07      AJU      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.03880226
## 7    m07       AP ZM_Toluca 0.00000000 0.00000000 0.00000000 0.00000000 0.02033721 0.02358477 0.02793113 0.01998559 0.01578436
## 8    m07      ATI      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02652964 0.02314987 0.03172600
## 9    m07      ATM    ZM_Gdl 0.03733179 0.02548223 0.02757735 0.02286939 0.02916225 0.00000000 0.03041052 0.02457392 0.02666134
## 10   m07      ATM    ZM_Gdl 0.03733179 0.02548223 0.02757735 0.02286939 0.02916225 0.00000000 0.03041052 0.02457392 0.02666134
## 11   m07      AZC      ZMVM 0.02740734 0.02770051 0.02830638 0.02035509 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
## 12   m07      CAM      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.01873655 0.01988024 0.02338102 0.02257593 0.02589013
## 13   m07       CB ZM_Toluca 0.00000000 0.00000000 0.00000000 0.00000000 0.02606044 0.00000000 0.00000000 0.02881348 0.02111777
## 14   m07      CCA      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02951414
## 15   m07   CE_Mty    ZM_Mty 0.02246026 0.02048039 0.02405338 0.01661003 0.02260133 0.02347037 0.02669415 0.02640308 0.02535004
## 16   m07   CE_Tol ZM_Toluca 0.02641941 0.00000000 0.00000000 0.00000000 0.01942101 0.02645037 0.01999982 0.01920187 0.02435258
## 17   m07      CEN    ZM_Gdl 0.03753904 0.02120899 0.03116512 0.01957423 0.02350000 0.02691667 0.02298457 0.02533199 0.02435589
## 18   m07      CES      ZMVM 0.02600196 0.01952489 0.02543040 0.01663381 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
## 19   m07      CHO      ZMVM 0.02126449 0.02802959 0.03111654 0.02173535 0.02148589 0.02442070 0.02757090 0.02550166 0.02877287
## 20   m07      COY      ZMVM 0.03554655 0.02605470 0.03203012 0.01888026 0.02161158 0.02371116 0.02655446 0.02554647 0.03017313
## 21   m07      CUA      ZMVM 0.03760443 0.02904043 0.00000000 0.02287285 0.02689914 0.02714168 0.03246325 0.02900219 0.03734967
## 22   m07      CUT      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02626391 0.02128137 0.02518299
## 23   m07      FAC      ZMVM 0.03060120 0.02392676 0.03037296 0.01845523 0.02327646 0.02406434 0.02789674 0.02664845 0.03177667
## 24   m07      HGM      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02191375 0.02506902 0.02196003 0.02871873
## 25   m07      IZT      ZMVM 0.01910770 0.02307208 0.02949927 0.02186788 0.01755641 0.01977520 0.02300040 0.02350758 0.02893409
## 26   m07      LAG      ZMVM 0.02723494 0.02385085 0.02617793 0.01725431 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
## 27   m07      LDO    ZM_Gdl 0.03560349 0.01971868 0.02614985 0.02281183 0.03214714 0.03128091 0.01668606 0.01968673 0.02376397
## 28   m07      LLA      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.02172057 0.02095591 0.02360806 0.02190541 0.02588474
## 29   m07      LPR      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.02581045 0.02523613 0.02879694 0.00000000 0.02333702
## 30   m07      MER      ZMVM 0.02883612 0.02030777 0.02429837 0.01933944 0.01602546 0.02014716 0.02379981 0.02072167 0.02636558
## 31   m07      MGH      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02921161
## 32   m07      MIR    ZM_Gdl 0.02489774 0.01782460 0.02405891 0.00000000 0.02824134 0.01775269 0.01697768 0.02399819 0.02161069
## 33   m07      MON      ZMVM 0.03126302 0.02932465 0.03074462 0.02264551 0.02758883 0.02612383 0.02973932 0.02510407 0.02657241
## 34   m07       MT ZM_Toluca 0.00000000 0.00000000 0.00000000 0.00000000 0.02884502 0.03010833 0.02570149 0.01880962 0.03070539
## 35   m07        N    ZM_Mty 0.00000000 0.00000000 0.00000000 0.01788488 0.02271861 0.02406317 0.02684498 0.02624106 0.02503773
## 36   m07       NE    ZM_Mty 0.02125672 0.01953056 0.02526124 0.01649384 0.02127554 0.02293038 0.02835546 0.02432065 0.02254564
## 37   m07      NE2    ZM_Mty 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02095968 0.02731720 0.01961255 0.00000000
## 38   m07      NEZ      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.02351033 0.02369619 0.03027398 0.02575415 0.02841419
## 39   m07       NO    ZM_Mty 0.02380055 0.02290702 0.02836782 0.01935788 0.02494893 0.02711866 0.02806872 0.02767368 0.02826649
## 40   m07      NO2    ZM_Mty 0.00000000 0.00000000 0.00000000 0.02394203 0.02640784 0.02791278 0.02983822 0.03260201 0.03203132
## 41   m07      OBL    ZM_Gdl 0.04385020 0.02648244 0.02680108 0.02767455 0.03848998 0.02558643 0.02203315 0.02176389 0.02632220
## 42   m07       OX ZM_Toluca 0.02634485 0.00000000 0.00000000 0.00000000 0.02169053 0.02867644 0.03009343 0.03162177 0.00000000
## 43   m07      PED      ZMVM 0.03604794 0.02698559 0.03513074 0.02441959 0.02310819 0.02656353 0.03267166 0.02558126 0.03359008
## 44   m07      PIN    ZM_Gdl 0.00000000 0.00000000 0.00000000 0.00000000 0.03351654 0.02571326 0.02330706 0.02584274 0.02897064
## 45   m07      PLA      ZMVM 0.02991840 0.02311889 0.03072673 0.01699615 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
## 46   m07      SAG      ZMVM 0.02697273 0.02149157 0.02346764 0.01844170 0.02045934 0.02450618 0.02533469 0.02187985 0.02701869
## 47   m07       SC ZM_Toluca 0.02904632 0.00000000 0.00000000 0.00000000 0.02677134 0.03035482 0.03713215 0.03061991 0.02625209
## 48   m07       SE    ZM_Mty 0.02702110 0.02623315 0.03008248 0.01963883 0.02452688 0.02450000 0.03018507 0.02678775 0.02418205
## 49   m07      SE2    ZM_Mty 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.01932070 0.01960427 0.01898278
## 50   m07      SFE    ZM_Gdl 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.03395153 0.02030108 0.02523714
## 51   m07      SFE      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02774028 0.03427535 0.02914500 0.03562034
## 52   m07      SJA      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.02031319 0.02106934 0.02293127 0.02292421 0.02809429
## 53   m07       SM ZM_Toluca 0.03085849 0.00000000 0.00000000 0.00000000 0.02464946 0.02753895 0.02463734 0.01418150 0.02508620
## 54   m07       SO    ZM_Mty 0.02455774 0.02390111 0.02854911 0.01923992 0.02377688 0.02403563 0.02661841 0.03045475 0.00000000
## 55   m07      SO2    ZM_Mty 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02888859 0.00000000
## 56   m07      SUR      ZMVM 0.03640757 0.02733778 0.03320870 0.02023980 0.02055366 0.02386946 0.03043738 0.02688508 0.00000000
## 57   m07      TAC      ZMVM 0.03226728 0.02198903 0.03111329 0.01954980 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
## 58   m07      TAH      ZMVM 0.03471440 0.03047779 0.03605746 0.02353005 0.02758050 0.03008380 0.03416023 0.03287397 0.03390224
## 59   m07      TAX      ZMVM 0.03280376 0.01680483 0.02449230 0.01524126 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000
## 60   m07  TLA_Gdl    ZM_Gdl 0.03060998 0.00000000 0.02428750 0.01687613 0.03587959 0.02464183 0.01962017 0.02002419 0.02417302
## 61   m07 TLA_ZMVM      ZMVM 0.02705805 0.02114697 0.02951793 0.01856158 0.01977986 0.02039241 0.02397997 0.02167832 0.02726607
## 62   m07      TLI      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.02071048 0.02382185 0.02611229 0.02222883 0.02639173
## 63   m07      TPN      ZMVM 0.05352227 0.02830401 0.00000000 0.02143358 0.02524729 0.02573227 0.02871346 0.02727221 0.02320303
## 64   m07      UAX      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.00000000 0.02556888 0.03024618 0.02685558 0.03243772
## 65   m07      UIZ      ZMVM 0.03264943 0.02612228 0.03163136 0.02163528 0.02229313 0.02442056 0.02872879 0.02388126 0.03030409
## 66   m07      VAL    ZM_Gdl 0.01770968 0.02412629 0.04742593 0.03450831 0.03385244 0.03151022 0.02885772 0.02832532 0.03191354
## 67   m07      VIF      ZMVM 0.00000000 0.00000000 0.00000000 0.00000000 0.02218225 0.02586289 0.02870667 0.02647882 0.02997140
## 68   m07      XAL      ZMVM 0.02352409 0.01683837 0.02054687 0.01686710 0.02165877 0.02236801 0.02412368 0.02424738 0.02142659
```

---

name: importar_csv

# Importando archivos .CSV

-  El paquete .RUred[readr] permite importar archivos con extensión .RUred[.csv]

- El comando .RUred[read_csv( )] nos permite leer archivos con extensión .RUred[.csv]


```r
tabla_csv &lt;- 
  read_csv("./data/CSV_archivo.csv") %&gt;% 
  print(n = 3)
```

```
## Rows: 68 Columns: 12
```

```
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (3): month, estacion, zona
## dbl (9): y2007, y2008, y2009, y2010, y2011, y2012, y2013, y2014, y2015
```

```
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

```
## # A tibble: 68 × 12
##   month estacion zona    y2007  y2008  y2009  y2010  y2011  y2012  y2013  y2014
##   &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 m07   ACO      ZMVM   0.0188 0.0253 0.0297 0.0226 0.0247 0.0252 0.0298 0.0251
## 2 m07   ACO      ZMVM   0.0188 0.0253 0.0297 0.0226 0.0247 0.0252 0.0298 0.0251
## 3 m07   AGU      ZM_Gdl 0.0392 0.0278 0.0294 0.0278 0.0265 0.0279 0.0256 0.0245
## # … with 65 more rows, and 1 more variable: y2015 &lt;dbl&gt;
```

---

name: importar_dta

# Importando archivos de Stata   .DTA

-  El paquete .RUred[haven] permite importar archivos con extensión .RUred[.dta]

- El comando .RUred[read_dta( )] nos permite leer archivos con extensión .RUred[.dta]


```r
library(haven)

tabla_stata &lt;- 
  read_dta("./data/STATA_archivo.dta") %&gt;% 
  print()
```

```
## # A tibble: 68 × 12
##    month estacion zona     y2007   y2008   y2009   y2010   y2011   y2012   y2013
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 m07   ACO      ZMVM    0.0188  0.0253  0.0297  0.0226  0.0247  0.0252  0.0298
##  2 m07   ACO      ZMVM    0.0188  0.0253  0.0297  0.0226  0.0247  0.0252  0.0298
##  3 m07   AGU      ZM_Gdl  0.0392  0.0278  0.0294  0.0278  0.0265  0.0279  0.0256
##  4 m07   AJM      ZMVM   NA      NA      NA      NA      NA      NA      NA     
##  5 m07   AJU      ZMVM   NA      NA      NA      NA      NA      NA      NA     
##  6 m07   AJU      ZMVM   NA      NA      NA      NA      NA      NA      NA     
##  7 m07   AP       ZM_To… NA      NA      NA      NA       0.0203  0.0236  0.0279
##  8 m07   ATI      ZMVM   NA      NA      NA      NA      NA      NA       0.0265
##  9 m07   ATM      ZM_Gdl  0.0373  0.0255  0.0276  0.0229  0.0292 NA       0.0304
## 10 m07   ATM      ZM_Gdl  0.0373  0.0255  0.0276  0.0229  0.0292 NA       0.0304
## # … with 58 more rows, and 2 more variables: y2014 &lt;dbl&gt;, y2015 &lt;dbl&gt;
```

---

name: importar_xlsx

# Importando archivos de Excel .XLSX

-  El paquete .RUred[readxl] permite importar archivos con extensión .RUred[.xlsx]

- El comando .RUred[read_xlsx( )] nos permite leer archivos con extensión .RUred[.xlsx]


```r
library(readxl)

tabla_excel &lt;- 
  read_xlsx("./data/EXCEL_archivo.xlsx", sheet = "datos_wide") %&gt;% 
  print()
```

```
## # A tibble: 68 × 12
##    month estacion zona     y2007   y2008   y2009   y2010   y2011   y2012   y2013
##    &lt;chr&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 m07   ACO      ZMVM    0.0188  0.0253  0.0297  0.0226  0.0247  0.0252  0.0298
##  2 m07   ACO      ZMVM    0.0188  0.0253  0.0297  0.0226  0.0247  0.0252  0.0298
##  3 m07   AGU      ZM_Gdl  0.0392  0.0278  0.0294  0.0278  0.0265  0.0279  0.0256
##  4 m07   AJM      ZMVM   NA      NA      NA      NA      NA      NA      NA     
##  5 m07   AJU      ZMVM   NA      NA      NA      NA      NA      NA      NA     
##  6 m07   AJU      ZMVM   NA      NA      NA      NA      NA      NA      NA     
##  7 m07   AP       ZM_To… NA      NA      NA      NA       0.0203  0.0236  0.0279
##  8 m07   ATI      ZMVM   NA      NA      NA      NA      NA      NA       0.0265
##  9 m07   ATM      ZM_Gdl  0.0373  0.0255  0.0276  0.0229  0.0292 NA       0.0304
## 10 m07   ATM      ZM_Gdl  0.0373  0.0255  0.0276  0.0229  0.0292 NA       0.0304
## # … with 58 more rows, and 2 more variables: y2014 &lt;dbl&gt;, y2015 &lt;dbl&gt;
```

---

name: ayuda_comando

# Buscando ayuda de un comando

.left-column[

```r
?read_xlsx
```
]

.right-column[
&lt;img src="./img/help_command.png" width="85%" /&gt;
]

---

name:clean_names

# Convenciones de codificación

- Son un conjunto de normas que estandarizan el estilo de redacción de los lenguajes de programación.

- Cada lenguaje de programación tiene (más o menos) sus propias convenciones *(naming)*.

- Recomiendan estilos de programación, buenas prácticas y métodos para mantener el aspecto del código fuente por ejemplo: la organización de archivos, la indentación, .RUred[nombres de columnas], los comentarios, las declaraciones los espacios en blanco, las llaves de apertura y cerrado…

&lt;img src="./img/snake_case.png" width="50%" style="display: block; margin: auto;" /&gt;

[Importancia de convenciones de codificación](https://geeks.ms/jorge/2019/03/24/la-importancia-de-las-convenciones-de-codificacion-pascalcase-camelcase-snake_case-y-kebab-case/)  
[Desde el CamelCase hasta el kebab-case](https://adrianalonso.es/cajon-desatre/convencion-de-nombres-desde-el-camelcase-hasta-el-kebab-case/)

---

.pull-left[

&amp;nbsp;

# Ejemplo de columnas sin formato de origen

]

.pull-right[

&lt;img src="./img/read_xlsx.png" width="80%" style="display: block; margin: auto auto auto 0;" /&gt;

]

--


```r
read_xlsx("./data/ejemplo_clean_names.xlsx") %&gt;% 
  print()
```

```
## # A tibble: 7 × 4
##   `ID estación monitoreo` `Concentración de … `ID del municipi… `Nombre de muni…
##   &lt;chr&gt;                                 &lt;dbl&gt; &lt;chr&gt;             &lt;chr&gt;           
## 1 site1                                  37.7 011               Tláhuac         
## 2 site2                                  13.9 003               Coyoacán        
## 3 site3                                  25.7 014               Benito Juárez   
## 4 site4                                  18.7 004               Cuajimalpa      
## 5 site5                                  31.6 016               Miguel Hidalgo  
## 6 site6                                  18.8 013               &lt;NA&gt;            
## 7 site7                                  35.2 007               Iztapalapa
```

---

# Formato snake_case usando el paquete {Janitor}

```r
library(janitor)

read_xlsx("./data/ejemplo_clean_names.xlsx") %&gt;% 
  clean_names() %&gt;% 
  print()
```

```
## # A tibble: 7 × 4
##   id_estacion_monitoreo concentracion_de_con… id_del_municipio nombre_de_munici…
##   &lt;chr&gt;                                 &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;            
## 1 site1                                  37.7 011              Tláhuac          
## 2 site2                                  13.9 003              Coyoacán         
## 3 site3                                  25.7 014              Benito Juárez    
## 4 site4                                  18.7 004              Cuajimalpa       
## 5 site5                                  31.6 016              Miguel Hidalgo   
## 6 site6                                  18.8 013              &lt;NA&gt;             
## 7 site7                                  35.2 007              Iztapalapa
```

---

name: turno_3

# Su turno

- Importe a su sesión el archivo .RUred[pm10_2014_salamanca.csv]

- Llame a su objeto .RUred[pm10]

---

name: pm10_salamanca


```r
pm10 &lt;- 
  read_csv("./data/pm10_2014_salamanca.csv") %&gt;%  
  print()
```

--


```
## Rows: 8764 Columns: 5
```

```
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (3): Fecha, Cruz Roja, Nativitas
## dbl (2): hora, DIF
```

```
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

```
## # A tibble: 8,764 × 5
##    Fecha     hora   DIF `Cruz Roja` Nativitas
##    &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;    
##  1 01/01/14     0    NA &lt;NA&gt;        &lt;NA&gt;     
##  2 01/01/14     1    68 57          224      
##  3 01/01/14     2    74 52          118      
##  4 01/01/14     3    58 45          59       
##  5 01/01/14     4    50 51          40       
##  6 01/01/14     5    48 39          43       
##  7 01/01/14     6    49 25          39       
##  8 01/01/14     7    41 42          43       
##  9 01/01/14     8    49 48          46       
## 10 01/01/14     9    60 50          47       
## # … with 8,754 more rows
```

---

name: fecha_salamanca

# Revisemos la columna .black[Fecha]

- El comando unique nos muestra los valores únicos en una variable

- El resultado es un vector


```r
unique(pm10$Fecha)
```


```
##   [1] "01/01/14" "02/01/14" "03/01/14" "04/01/14" "05/01/14" "06/01/14" "07/01/14" "08/01/14" "09/01/14" "10/01/14" "11/01/14" "12/01/14" "13/01/14" "14/01/14" "15/01/14" "16/01/14" "17/01/14" "18/01/14" "19/01/14" "20/01/14" "21/01/14" "22/01/14"
##  [23] "23/01/14" "24/01/14" "25/01/14" "26/01/14" "27/01/14" "28/01/14" "29/01/14" "30/01/14" "31/01/14" "01/02/14" "02/02/14" "03/02/14" "04/02/14" "05/02/14" "06/02/14" "07/02/14" "08/02/14" "09/02/14" "10/02/14" "11/02/14" "12/02/14" "13/02/14"
##  [45] "14/02/14" "15/02/14" "16/02/14" "17/02/14" "18/02/14" "19/02/14" "20/02/14" "21/02/14" "22/02/14" "23/02/14" "24/02/14" "25/02/14" "26/02/14" "27/02/14" "28/02/14" "01/03/14" "02/03/14" "03/03/14" "04/03/14" "05/03/14" "06/03/14" "07/03/14"
##  [67] "08/03/14" "09/03/14" "10/03/14" "11/03/14" "12/03/14" "13/03/14" "14/03/14" "15/03/14" "16/03/14" "17/03/14" "18/03/14" "19/03/14" "20/03/14" "21/03/14" "22/03/14" "23/03/14" "24/03/14" "25/03/14" "26/03/14" "27/03/14" "28/03/14" "29/03/14"
##  [89] "30/03/14" "31/03/14" "01/04/14" "02/04/14" "03/04/14" "04/04/14" "05/04/14" "06/04/14" "07/04/14" "08/04/14" "09/04/14" "10/04/14" "11/04/14" "12/04/14" "13/04/14" "14/04/14" "15/04/14" "16/04/14" "17/04/14" "18/04/14" "19/04/14" "20/04/14"
## [111] "21/04/14" "22/04/14" "23/04/14" "24/04/14" "25/04/14" "26/04/14" "27/04/14" "28/04/14" "29/04/14" "30/04/14" "01/05/14" "02/05/14" "03/05/14" "04/05/14" "05/05/14" "06/05/14" "07/05/14" "08/05/14" "09/05/14" "10/05/14" "11/05/14" "12/05/14"
## [133] "13/05/14" "14/05/14" "15/05/14" "16/05/14" "17/05/14" "18/05/14" "19/05/14" "20/05/14" "21/05/14" "22/05/14" "23/05/14" "24/05/14" "25/05/14" "26/05/14" "27/05/14" "28/05/14" "29/05/14" "30/05/14" "31/05/14" "01/06/14" "02/06/14" "03/06/14"
## [155] "04/06/14" "05/06/14" "06/06/14" "07/06/14" "08/06/14" "09/06/14" "10/06/14" "11/06/14" "12/06/14" "13/06/14" "14/06/14" "15/06/14" "16/06/14" "17/06/14" "18/06/14" "19/06/14" "20/06/14" "21/06/14" "22/06/14" "23/06/14" "24/06/14" "25/06/14"
## [177] "26/06/14" "27/06/14" "28/06/14" "29/06/14" "30/06/14" "01/07/14" "02/07/14" "03/07/14" "04/07/14" "05/07/14" "06/07/14" "07/07/14" "08/07/14" "09/07/14" "10/07/14" "11/07/14" "12/07/14" "13/07/14" "14/07/14" "15/07/14" "16/07/14" "17/07/14"
## [199] "18/07/14" "19/07/14" "20/07/14" "21/07/14" "22/07/14" "23/07/14" "24/07/14" "25/07/14" "26/07/14" "27/07/14" "28/07/14" "29/07/14" "30/07/14" "31/07/14" "01/08/14" "02/08/14" "03/08/14" "04/08/14" "05/08/14" "06/08/14" "07/08/14" "08/08/14"
## [221] "09/08/14" "10/08/14" "11/08/14" "12/08/14" "13/08/14" "14/08/14" "15/08/14" "16/08/14" "17/08/14" "18/08/14" "19/08/14" "20/08/14" "21/08/14" "22/08/14" "23/08/14" "24/08/14" "25/08/14" "26/08/14" "27/08/14" "28/08/14" "29/08/14" "30/08/14"
## [243] "31/08/14" "01/09/14" "02/09/14" "03/09/14" "04/09/14" "05/09/14" "06/09/14" "07/09/14" "08/09/14" "09/09/14" "10/09/14" "11/09/14" "12/09/14" "13/09/14" "14/09/14" "15/09/14" "16/09/14" "17/09/14" "18/09/14" "19/09/14" "20/09/14" "21/09/14"
## [265] "22/09/14" "23/09/14" "24/09/14" "25/09/14" "26/09/14" "27/09/14" "28/09/14" "29/09/14" "30/09/14" "01/10/14" "02/10/14" "03/10/14" "04/10/14" "05/10/14" "06/10/14" "07/10/14" "08/10/14" "09/10/14" "10/10/14" "11/10/14" "12/10/14" "13/10/14"
## [287] "14/10/14" "15/10/14" "16/10/14" "17/10/14" "18/10/14" "19/10/14" "20/10/14" "21/10/14" "22/10/14" "23/10/14" "24/10/14" "25/10/14" "26/10/14" "27/10/14" "28/10/14" "29/10/14" "30/10/14" "31/10/14" "01/11/14" "02/11/14" "03/11/14" "04/11/14"
## [309] "05/11/14" "06/11/14" "07/11/14" "08/11/14" "09/11/14" "10/11/14" "11/11/14" "12/11/14" "13/11/14" "14/11/14" "15/11/14" "16/11/14" "17/11/14" "18/11/14" "19/11/14" "20/11/14" "21/11/14" "22/11/14" "23/11/14" "24/11/14" "25/11/14" "26/11/14"
## [331] "27/11/14" "28/11/14" "29/11/14" "30/11/14" "01/12/14" "02/12/14" "03/12/14" "04/12/14" "05/12/14" "06/12/14" "07/12/14" "08/12/14" "09/12/14" "10/12/14" "11/12/14" "12/12/14" "13/12/14" "14/12/14" "15/12/14" "16/12/14" "17/12/14" "18/12/14"
## [353] "19/12/14" "20/12/14" "21/12/14" "22/12/14" "23/12/14" "24/12/14" "25/12/14" "26/12/14" "27/12/14" "28/12/14" "29/12/14" "30/12/14" "31/12/14"
```

---

name: hora_salamanca

# Columna .black[hora]


```r
unique(pm10$hora)
```

```
##  [1]  0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23
```

---

name: DIF_salamanca

# Columna .black[DIF]


```r
unique(pm10$DIF)
```

```
##   [1]  NA  68  74  58  50  48  49  41  60  33  23  26  45  25  19  31  43  56
##  [19]  69  34  20  22  28  44  38  30  51  61  40  37  27  16  17  12  15  14
##  [37]  29  42 108 146 189  97  70  52  64  36  47  82 133  98  67  54  81 120
##  [55] 149  89  88 115  75  53  59 122  87  63 109 123  55  66  72  18  21  32
##  [73]  39  35  46 148 160  93  62  77  96  83  71  24  76 105 116 144 100  84
##  [91] 170 159  80  65 110 129 161 114  57  90  92 126  78  85 101  73 118 113
## [109] 151  94 124 139 175 153 121 106 166 192 191 107  79 195  99 130 140 141
## [127] 135  91 174 221 331 316 154 103 134 183 162 102  86 119 206 212  95 251
## [145] 279 111 178 177 230 227 128 205 242 247 104 214 171 125 216 194 280 252
## [163] 203 209 138 225 143 132 219 249 112 193 155 187 235 150 259 312 145 156
## [181] 290 286 217 165 117 142 218 202 190 152 127   9 137 131 136 287 282 288
## [199] 222 199 158 182 261 147 186 250 169 173 208 172 168 157 318  11 268 334
## [217] 220 180  13   8   6   7 256  10 188 167   5 246 179 200   4 211 198 229
## [235] 176 234 231 309 164 332 439 308 263 423 303 201 387 365 380 265 358 213
## [253] 184 239 163 304 260
```

---

name: cr_salamanca

# Columna .black['Cruz Roja']

- El comando .RUred[sort( )] nos permite ordenar los datos de forma ascendente


```r
sort(unique(pm10$`Cruz Roja`))
```


```
##   [1] "10"  "100" "101" "102" "103" "104" "105" "106" "107" "108" "109" "11"  "110" "111" "112" "113" "114" "115"
##  [19] "116" "117" "118" "119" "12"  "120" "121" "122" "123" "124" "125" "126" "127" "128" "129" "13"  "130" "131"
##  [37] "132" "133" "134" "135" "136" "137" "138" "139" "14"  "140" "141" "142" "143" "144" "145" "146" "147" "148"
##  [55] "149" "15"  "150" "151" "152" "153" "155" "156" "157" "158" "159" "16"  "160" "161" "163" "164" "165" "166"
##  [73] "167" "168" "169" "17"  "170" "171" "173" "174" "175" "176" "177" "178" "179" "18"  "180" "181" "183" "184"
##  [91] "187" "188" "19"  "192" "196" "197" "199" "20"  "200" "201" "203" "207" "209" "21"  "210" "211" "215" "216"
## [109] "22"  "221" "222" "226" "23"  "24"  "247" "25"  "252" "26"  "260" "27"  "271" "275" "28"  "29"  "3"   "30" 
## [127] "309" "31"  "32"  "33"  "34"  "35"  "36"  "37"  "38"  "39"  "4"   "40"  "41"  "42"  "43"  "44"  "45"  "46" 
## [145] "47"  "48"  "49"  "5"   "50"  "51"  "52"  "53"  "54"  "55"  "56"  "57"  "58"  "59"  "6"   "60"  "61"  "62" 
## [163] "63"  "64"  "65"  "66"  "67"  "68"  "69"  "7"   "70"  "71"  "72"  "73"  "74"  "75"  "76"  "77"  "78"  "79" 
## [181] "8"   "80"  "81"  "82"  "83"  "84"  "85"  "86"  "87"  "88"  "89"  "9"   "90"  "91"  "92"  "93"  "94"  "95" 
## [199] "96"  "97"  "98"  "99"  "nd"  "ND"
```

---

name: nativitas_salamanca

# Columna .black[Nativitas]


```r
sort(unique(pm10$Nativitas))
```


```
##   [1] "10"       "100"      "101"      "102"      "103"      "104"      "105"      "106"      "107"      "108"     
##  [11] "109"      "11"       "110"      "111"      "112"      "113"      "114"      "115"      "116"      "117"     
##  [21] "118"      "119"      "12"       "120"      "121"      "122"      "123"      "124"      "125"      "126"     
##  [31] "127"      "128"      "129"      "13"       "130"      "131"      "132"      "133"      "134"      "135"     
##  [41] "136"      "137"      "138"      "139"      "14"       "140"      "141"      "142"      "143"      "144"     
##  [51] "145"      "146"      "147"      "148"      "149"      "15"       "150"      "151"      "152"      "153"     
##  [61] "154"      "155"      "156"      "157"      "158"      "159"      "16"       "160"      "161"      "162"     
##  [71] "163"      "164"      "165"      "166"      "167"      "168"      "169"      "17"       "170"      "171"     
##  [81] "172"      "173"      "174"      "175"      "176"      "177"      "178"      "179"      "18"       "180"     
##  [91] "181"      "182"      "183"      "184"      "185"      "186"      "187"      "188"      "189"      "19"      
## [101] "190"      "191"      "192"      "193"      "194"      "195"      "196"      "197"      "198"      "199"     
## [111] "2"        "20"       "200"      "201"      "202"      "203"      "204"      "205"      "206"      "207"     
## [121] "208"      "209"      "21"       "212"      "213"      "214"      "215"      "216"      "217"      "218"     
## [131] "219"      "22"       "220"      "221"      "222"      "224"      "225"      "226"      "227"      "228"     
## [141] "229"      "23"       "230"      "231"      "232"      "234"      "235"      "236"      "238"      "239"     
## [151] "24"       "240"      "241"      "242"      "245"      "247"      "248"      "249"      "25"       "250"     
## [161] "252"      "253"      "257"      "258"      "26"       "260"      "261"      "263"      "264"      "267"     
## [171] "268"      "269"      "27"       "273"      "276"      "278"      "28"       "281"      "285"      "286"     
## [181] "288"      "29"       "291"      "294"      "296"      "298"      "30"       "300"      "301"      "302"     
## [191] "307"      "308"      "309"      "31"       "311"      "317"      "319"      "32"       "320"      "321"     
## [201] "327"      "33"       "330"      "339"      "34"       "346"      "35"       "354"      "358"      "36"      
## [211] "37"       "377"      "38"       "39"       "393"      "396"      "40"       "401"      "406"      "41"      
## [221] "42"       "43"       "430"      "433"      "44"       "45"       "457"      "46"       "47"       "48"      
## [231] "49"       "5"        "50"       "51"       "52"       "53"       "54"       "547"      "55"       "56"      
## [241] "57"       "58"       "59"       "6"        "60"       "61"       "62"       "63"       "64"       "65"      
## [251] "66"       "67"       "68"       "69"       "7"        "70"       "71"       "72"       "73"       "74"      
## [261] "75"       "76"       "77"       "78"       "79"       "8"        "80"       "81"       "82"       "83"      
## [271] "84"       "85"       "86"       "87"       "88"       "89"       "9"        "90"       "91"       "92"      
## [281] "93"       "94"       "95"       "96"       "97"       "98"       "99"       "sin dato"
```

---

name: pm10_salamanca_clean


```r
pm10 &lt;- 
  read_csv("./data/pm10_2014_salamanca.csv", 
           # Identifico en un vector a los valores a codificar como NA
           na = c("ND", "nd", "sin dato"), 
           # Selecciono de la columna 1 a la 5
           col_select = 1:5) %&gt;% 
  clean_names() %&gt;% 
  print(n = 4)
```

```
## Rows: 8764 Columns: 5
```

```
## ── Column specification ────────────────────────────────────────────────────────
## Delimiter: ","
## chr (1): Fecha
## dbl (4): hora, DIF, Cruz Roja, Nativitas
```

```
## 
## ℹ Use `spec()` to retrieve the full column specification for this data.
## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.
```

```
## Warning: One or more parsing issues, see `problems()` for details
```

```
## # A tibble: 8,764 × 5
##   fecha     hora   dif cruz_roja nativitas
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;
## 1 01/01/14     0    NA        NA        NA
## 2 01/01/14     1    68        57       224
## 3 01/01/14     2    74        52       118
## 4 01/01/14     3    58        45        59
## # … with 8,760 more rows
```

---

# Análisis exploratorio de la malla de datos


```r
names(pm10)
```

```
## [1] "fecha"     "hora"      "dif"       "cruz_roja" "nativitas"
```

--


```r
glimpse(pm10)
```

```
## Rows: 8,764
## Columns: 5
## $ fecha     &lt;chr&gt; "01/01/14", "01/01/14", "01/01/14", "01/01/14", "01/01/14", …
## $ hora      &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17…
## $ dif       &lt;dbl&gt; NA, 68, 74, 58, 50, 48, 49, 41, 49, 60, 33, 23, 26, 45, 41, …
## $ cruz_roja &lt;dbl&gt; NA, 57, 52, 45, 51, 39, 25, 42, 48, 50, 40, 76, 47, 44, 46, …
## $ nativitas &lt;dbl&gt; NA, 224, 118, 59, 40, 43, 39, 43, 46, 47, 37, 34, 43, 48, 50…
```

--


```r
summary(pm10)
```


```
##     fecha                hora            dif           cruz_roja        nativitas     
##  Length:8764        Min.   : 0.00   Min.   :  4.00   Min.   :  3.00   Min.   :  2.00  
##  Class :character   1st Qu.: 5.75   1st Qu.: 33.00   1st Qu.: 28.00   1st Qu.: 37.00  
##  Mode  :character   Median :11.50   Median : 47.00   Median : 40.00   Median : 53.00  
##                     Mean   :11.50   Mean   : 55.54   Mean   : 46.81   Mean   : 62.86  
##                     3rd Qu.:17.00   3rd Qu.: 66.00   3rd Qu.: 57.00   3rd Qu.: 76.00  
##                     Max.   :23.00   Max.   :439.00   Max.   :309.00   Max.   :547.00  
##                                     NA's   :18       NA's   :57       NA's   :62
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlighLine": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
